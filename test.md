معرفی رابط برنامه نویسی ایتایار )ir.eitaayar)
در مقاله پیش رو به معرفی رابط برنامه نویسیی یا به اصاریار API ایاایار میپردازیم. برای اسیاداد از این امکان، داشیان حداقل دانش
برنامه نویسیی در زمینه فراصوانی url و نیز آشینایی با json الزم و ضیروری است. اگر با موارد فوق آشنا نیساید، پیش از مطالعهی این
مان، دربار آنها مطالعه کنید.
ساخت آدرس API محرمانه و مختص پنل شما:
همه درصواستها و مادهایی که اساداد میکنید به صورت زیر میباشد:
https://eitaayar.ir/api/TOKEN/METHOD_NAME
TOKEN: توکنی که از سایت دریافت کرد اید.
NAME_METHOD: نام مادی که قرد اساداد از آن را دارید.
هیچکدام از مادهای API به حروف کوچک و بزرگ حساسیت ندارند. یعنی )insensitive-case )میباشند و دو نوع GET و POST
را پشایبانی میکنند. شما میتوانید برای ارسال پارامارها از روشهای زیر اساداد کنید:
URL query string
application/json
application/x-www-form-urlencoded
multipart/form-data
اگر ارسال به درسای انجام شود، یک آبجکت json بازگشت داد میشود. اولین پارامار این آبجکت ok است که مقدار true یا false
دارد. مقدار true به معنای درست انجام شدن کار و مقدار false به معنای صطا در انجام کار، صطا در پارامارهای ارسالی یا صطای داصلی
سیرور اسیت . ابادای هر ذصیر سیازی هموار مقدار ok را چک کنید. اگر مقدار true بود، ذصیر سازی انجام شود وگرنه باید اصالحیه
جدید اعمال شد سپس ارسال انجام شود.
راهنمای رابط برنامهنویسی ایتایار – نسخه آزمایشی 2 پشتیبانی سامانه: Yavar/com.eitaa://https
متدها:
getMe .1
sendMessage .2
sendDocument .3
.1 متد getMe:
اولین و ساد ترین ماد است که بدون ورودی کار میکند و با اساداد از آن، اطالعاتی دربار API در قالب یک آبجکت برگشت داد
میشود. صروجی به صورت زیر میباشد:
{
"ok": true,
"result": {
"id": 112233,
"is_bot": true,
"first_name": "ایاایار",
"last_name": "eitaayar",
"username": "testAdmin"
}
}
.2 متد sendMessage:
از این ماد برای ارسال پیغام مانی اساداد میشود و در صورت موفقیت آمیز بودن، پیغام ارسال شد در json صروجی با عنوان text
برگشت داد میشود.
پارامترهای قابل تنظیم:
id_chat: شیناسه منحرر به فرد کانال یا گرو است که در قسمت کانالها در پنل ایاایار برای هر کانال موجود میباشد. الباه میتوانید
به جای شناسه از username کانال بدون @ اساداد کنید. )اجباری(
)chat_id=eitaayar یا و chat_id=1404 :مثال)
text: مان پیامی که میصواهید ارسال کنید. )اجباری(
title: عنوان مطلب که فقط در پنل کاربرد دارد و برای جساجو و نمایش لیسای پیغام اساداد میشود. )اصایاری(
notification_disable: اگر با عدد یک مقدار دهی شود، پیام را بدون notification برای کاربر ارسال میکند. )اصایاری(
راهنمای رابط برنامهنویسی ایتایار – نسخه آزمایشی 3 پشتیبانی سامانه: Yavar/com.eitaa://https
id_message_to_reply: اگر میصواهید مانی که ارسیال میکنید در جواب یک message دیگر باشید ، شناسهی آن مطلب در
پیام رسان ایاا را با اساداد از این پارامار مشخص میکنید. )اصایاری(
date: تاریخ و زمان ارسال پیغام که برای ارسال زمان بندی باید به صورت Timestamp Unix ارسال شود. در این عدد تعداد ثانیهها
از سییاعت :۰۰ :۰۰ ۰۰ اول ژانویه 1۷۹۰)سییاعت هماهنگ جهانی( محاسییبه میشییود. به عنوان مثال در php این عدد از تابع time
اساخراج میشود. )اصایاری(
pin: اگر با مقدار 1 مقدار دهی شود، پیغام بعد از ارسال، در کانال یا گرو سنجاق میشود. )اصایاری(
viewCountForDelete: وقای که تعداد مشاهد ی پیام توسط کاربران ایاا به این عدد برسد، پیغام فوق حذف میشود. )اصایاری(
توجه: اگر صطایی رخ دهد یا پارامار اشاباهی ارسال کنید، با مقدار ok برابر با false مواجه صواهید شد.
صروجی بدون صطا به صورت زیر می باشد:
{
"ok": true,
"result": {
" message_id": 85917,
" from":{
"id": 112233,
"is_bot": true,
"first_name": "ایاایار",
"last_name": "eitaayar",
"username": "testAdmin"
},
"chat":{
"id": 112233,
"type": "public",
"username": "eitaa"
},
"date": 1560849434,
"مان ارسالی" :"text"
}
}
راهنمای رابط برنامهنویسی ایتایار – نسخه آزمایشی 4 پشتیبانی سامانه: Yavar/com.eitaa://https
.3 متد sendFile:
این ماد همانند ماد sendMessage میباشیید با این تداوت که جهت ارسییال فایل، صییوت، فیلم و... از آن اسییاداد میشییود.
پارامارهای این ماد همانند پارامارهای sendMessage است که یک گزینهی آن ماداوت است و یک گزینه هم بیشار دارد:
پارامترهای قابل تنظیم:
file: برای ارسال مدیا یا هر نوع فایل دیگر به پیام رسان از آن اساداد میشود. )اجباری(
caption: به جای اسیاداد از text در ماد sendMessage، در این ماد باید از عنوان caption اساداد شود تا مان caption
فایل دریافت شود. )اصایاری(
توجه: برای ارسال گیف، فایل مورد نظر را با عنوان gif. ارسال کنید.
)مثال: 4mp.sample به gif.sample تبدیل میشود(
همچنین برای ارسال اسایکر، باید فایل مورد نظر را با عنوان webp. ارسال کنید.
)مثال: png.sample به webp.sample تبدیل میشود(
صروجی ارسال درست به صورت زیر می باشد:
{
"ok": true,
"result": {
" message_id": 85917,
" from":{
"id": 112233,
"is_bot": true,
"first_name": "ایاایار",
"last_name": "eitaayar",
"username": "testAdmin"
},
"chat":{
"id": 112233,
"type": "public",
"username": "eitaa"
},
"date": 1560849434,
"مان ارسالی" :"caption"
}
ضمنا برای تست API میتوانید بعد از ورود به پنل از آدرس testApi/ir.eitaayar://https اساداد کنید.
